<div class="calendar">

  <app-calendar-header
    [weekStart]="weekStart"
    [weekEnd]="weekEnd"
    [year]="this.timeFrame.year"
    [monthName]="this.timeFrame.month"
    (onToday)="getToday()"
    (onWeekCHange)="getWeekChange($event)"
    (onGetFirstOrLastWeek)="getFirstOrLastWeek($event)"
    ></app-calendar-header>

  <div class="outer">

<div class="wrap">
  <table class="offset">
    <thead>
      <tr>
        <th class="headcol"></th>
        <ng-container *ngFor="let singleDate of weekDays; let i = index; let isLast = last">
          <th *ngIf="i !== weekDays.length - 2 && !isLast">{{ singleDate.day }}</th>
          <th *ngIf="i === weekDays.length - 2">{{ singleDate.day }}</th>
          <th *ngIf="isLast">{{ singleDate.day }}</th>
        </ng-container>
      </tr>
    </thead>
  <tbody>
    <ng-container *ngFor="let slot of timeSlots; even as isEven;">
      <tr [attr.data-time]="slot">
        <td class="headcol">
          <span *ngIf="isEven" class="headcol-text">{{ slot }}</span>
        </td>
        <td *ngFor="let day of eventGrid">

          <div
            *ngIf="findEvent(day, slot)?.event; else noEvent"
            [style.height]="'calc(' + getEventSpan(day.date, slot) + '% - 0.25rem)' || null"
            class="event-box absolute"
            >
            <span class="event-box__title">{{ findEvent(day, slot).event?.title }}</span>
            <span class="event-box__description">{{ findEvent(day, slot).event?.description }}</span>
          </div>
        </td>
      </tr>
    </ng-container>
  </tbody>
</table>
</div>
</div>
</div>

<ng-template #noEvent>
  <!-- Placeholder or empty cell -->
</ng-template>
