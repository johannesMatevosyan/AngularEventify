<div class="calendar"
  [style]="{
    'background-color': schedulerUI.schedulerBackColor,
    'color': schedulerUI.schedulerFontColor,
  }"
  [ngClass]="customClass">

  <app-calendar-header
    [weekStart]="weekStart"
    [weekEnd]="weekEnd"
    [year]="this.timeFrame.year"
    [monthName]="this.timeFrame.month"
    [titleColor]="titleColor"
    [todaysDate]="today"
    (onToday)="getToday()"
    (onWeekCHange)="getWeekChange($event)"
    (onGetFirstOrLastWeek)="getFirstOrLastWeek($event)"
    ></app-calendar-header>

  <div class="outer">

<div class="wrap">
  <table class="offset">
    <thead>
      <tr scope="row">
        <th
          class="headcol"
          scope="col"
          [style]="{
            'border-bottom': '2px solid ' + schedulerUI.cellColor ? schedulerUI.cellColor : '#dddddd'
          }"></th>
        <th
          scope="col"
          *ngFor="let dayInWeek of weekDays;"
          [attr.aria-label]="dayInWeek.date"
          [style]="{
            'color': schedulerUI.schedulerFontColor,
            'border-bottom': '2px solid ' + schedulerUI.cellColor ? schedulerUI.cellColor : '#dddddd',
          }"
          [ngClass]="{'is-today' : dayInWeek.date === today.split(' ')[0]}">
            {{ dayInWeek.day }}
        </th>
      </tr>
    </thead>
  <tbody>

    <tr
      *ngFor="let slot of timeSlots; even as isEven;"
      [attr.data-time]="slot"
      scope="row">
      <td class="headcol" [style]="{
        'color': schedulerUI.schedulerFontColor,
        'border-right': '1px solid ' + schedulerUI.schedulerFontColor ? schedulerUI.cellColor : '#eeeeee',
      }">
        <span *ngIf="isEven" class="headcol-text" [ngClass]="{'am-pm' : isAmPmFormat}">
          {{ isAmPmFormat ? (slot | timeFormat) : slot }}
        </span>
      </td>
      <td *ngFor="let day of eventGrid;"
        [ngClass]="{'is-today' : day.date === today}"
        [style]="{
          'border-right': '1px solid ' + schedulerUI.cellColor ? schedulerUI.cellColor : '#eeeeee',
          'border-bottom': '1px solid ' + schedulerUI.cellColor ? schedulerUI.cellColor : '#eeeeee',
        }"
        (click)="findEvent(day, slot) ? addEvent($event, day.date, slot) : null;">

        <app-current-time-indicator
          *ngIf="day.date === today.split(' ')[0] && isCurrentTimeInSlot(slot)"
          [currentTime]="slot"
          [barColor]="currentTimeBarColor"
          ></app-current-time-indicator>

        <app-event
          *ngIf="findEvent(day, slot)?.event; else noEvent"
          [appDisableRightClick]="disableRightClick"
          (click)="openEvent($event, findEvent(day, slot)?.event)"
          (keydown.enter)="openEvent($event, findEvent(day, slot)?.event)"
          [eventSpan]="getEventSpan(day.date, slot) || null"
          [title]="findEvent(day, slot)?.event?.name || ''"
          [id]="findEvent(day, slot)?.event?.id || ''"
          [eventUI]="eventUI"
          [eventDuration]="{
            startTime: findEvent(day, slot)?.event?.startTime || '',
            endTime: findEvent(day, slot)?.event?.endTime || '',
            date: findEvent(day, slot)?.event?.date || ''
          }"
          >
        </app-event>

      </td>
    </tr>

  </tbody>
</table>
</div>
</div>
</div>

<ng-template #noEvent>
  <!-- Placeholder or empty cell -->
</ng-template>

<app-modal-dialog
  #eventModal
  [title]="dialogTitle"
  [data]="currentEvent"
  [isAmPmFormat]="isAmPmFormat"
  [hideOnEsc]='true'>
</app-modal-dialog>
